---
title: android消息推送
date: 2018-01-07 18:48:46
tags: android
---
之前与服务器通信的时候，使用的是handler轮询的机制，固定几秒来查一次接口数据。

这样做有两个弊端，一个是当app被注销的时候，无法实现通知的功能。另一个是轮询无法达到实时性的地步。

同时无法实现消息推送的功能。

im通信的原理：客户端a发送消息->服务端处理->发送给客户端b

消息推送的原理：客户端a发送消息->服务端处理->发送给客户端a


# 长连接和短连接

1. 长连接：客户端和服务器之间始终建立着一个通信连接，在连接没有中断之前，客户端和服务器之间可以随时通信
典型范例 socket
长连接实现的实时通讯，称作推送

2. 短连接：通信双方有数据交互时，就建立一个连接，数据发送完成后，断开此连接
典型范例 http
短连接实现的实时通讯，称作轮询
